{{- include header }}
<div class="content row">
  <div class="col-md-1"></div>
  <div class="index-container col-md-7">
  </div>
  <div class="article-container col-md-7">
  </div>
  <div class="about-container col-md-7">
  {{- include about }} 
  </div>
  <div class="right-column col-md-2">
    <div class="recent-container">
    </div>
    <div class="tags-container">
    </div>
    <div class="friend-container">
      <br />
      <h4>friends</h4>
      <div class="post-wigets">
        <div><a href="http://mex7.org/" target="_blank">Mex</a></div>
        <div><a href="http://www.solome.org/" target="_blank">solo</a></div>
        <div><a href="http://www.ysmood.org/" target="_blank">ys</a></div>
      </div>
    </div>
  </div>
</div>
{{- include footer }}
</div>
</body>
<script src='/javascripts/jquery-1.10.2.min.js'></script>
<script src='/javascripts/bootstrap.min.js'></script>
<script src='/javascripts/underscore-min.js'></script>
<script src='/javascripts/backbone-min.js'></script>
<script src='/javascripts/index.js'></script>
<script type="text/template" id="index-template">
    <div class="index-area">
      <%_.each(articles.posts, function(article) {%>
      <div class="index-article-area ">
        <h2 class="articles-title"><a href="#p/<%=article._id%>"><%= article.title %></a></h2>
        <p class="article-content"><%= article.post %></p>
        <p>This entry was posted on <span class="article-time"><%= article.time.day%></span></p>
      </div>
    <%})%>
    </div>
    <ul class="pagination">
        <% 
          var currentPage = parseInt( window.location.href.split("/")[window.location.href.split("/").length - 1] ); 
          currentPage = isNaN(currentPage)?1:currentPage;
          var prevPage =  currentPage <= 1 ?1:currentPage-1 ;
          var nextPage = currentPage >= Math.ceil(articles.total/10)?Math.ceil(articles.total/10):currentPage+1;
          %>
      <li>
        <a class="item" href="#/index/<%= prevPage %>">
          &laquo;
        </a>
      </li>
      <% for (var i = 1;i <= Math.ceil( articles.total/10 );i++){%>
        <li><a class="item" href="/#index/<%=i%>"><%=i%></a></li>
      <%}%>
      <li>
        <a class="item" href="/#index/<%= nextPage %>">
          &raquo;
        </a>
      </li>
    </div>
</script>
<script type="text/template" id="article-template">
    <div class="article-area">
      <h1 class="article-title"><%= title %></h1>
      <p class="article-status">post on:&nbsp;<%= time.minute %> read:&nbsp;<%= pv %> tag:&nbsp;#<%=tags %></p>
      <p><%= post %></p>
    </div>
</script>
<script type="text/template" id="recent-template">
  <h4>Recent post</h4>
  <%_.each(recents,function(article) {%>
      <div class="post-wigets">
        <div class="post-list"><a href="#p/<%=article._id%>"><%=article.title%></a></div>
      </div>
   <%})%>
</script>
<script type="text/template" id="tags-template">
  <h4>Tags</h4>
  <ul class="tags-area">
  <%_.each(tags,function(tag) {%>
    <li><a href="#p/tag/<%=tag%>"><%=tag%></a></li>
  <%})%>
  </ul>
</script>
<script type="text/template" id="tagarticle-template">
  <div class="tagarticle-area">
    <h4>
      TAGS ARCHIVE:<%=datas.tag%>
    </h4>
    <%_.each(datas.docs, function(article) {%>
      <div class="index-article-area ">
        <h2 class="articles-title"><a href="#p/<%=article._id%>"><%= article.title %></a></h2>
        <p class="article-author">post by <%= article.name %></p>
        <p class="article-content"><%= article.post %></p>
        <p><%=article.time.minute%></p>
      </div>
    <%})%>
  </div>
</script>
</html>
