{{- include header }}
<div class="content">
  <div class="index-container">
  </div>
  <div class="login-container">
  </div>
  <div class="register-container">
  </div>
  <div class="article-container">
  </div>
</div>
{{- include footer }}
</div>
</body>
<script src='/javascripts/jquery-1.10.2.min.js'></script>
<script src='/javascripts/bootstrap.min.js'></script>
<script src='/javascripts/underscore-min.js'></script>
<script src='/javascripts/backbone-min.js'></script>
<script src='/javascripts/index.js'></script>
<script type="text/template" id="index-template">
    <div class="index-area grid ui">
      <%_.each(articles.posts, function(article) {%>
      <div class="ui articles-area  piled segment ten wide column ">
        <h2 class="article-title"><a href="#/p/<%=article._id%>"><%= article.title %></a></h2>
        <p class="article-author">post by <%= article.name %></p>
        <p class="article-content"><%= article.post %></p>
      </div>
    <%})%>
    </div>
    <ul class="pagination">
        <% 
          var currentPage = parseInt( window.location.href.split("/")[window.location.href.split("/").length - 1] ); 
          currentPage = isNaN(currentPage)?1:currentPage;
          var prevPage =  currentPage <= 1 ?1:currentPage-1 ;
          var nextPage = currentPage >= Math.ceil(articles.total/10)?Math.ceil(articles.total/10):currentPage+1;
          %>
      <li>
        <a class="item" href="#/index/<%= prevPage %>">
          &laquo;
        </a>
      </li>
      <% for (var i = 1;i <= Math.ceil( articles.total/10 );i++){%>
        <li><a class="item" href="/#index/<%=i%>"><%=i%></a></li>
      <%}%>
      <li>
        <a class="item" href="/#index/<%= nextPage %>">
          &raquo;
        </a>
      </li>
    </div>
</script>
<script type="text/template" id="article-template">
    <div class="article-area">
      <h2 class="article-title"><%= title %></h2>
      <p><%= time.day %>post by <%= name %></p>
      <p><%= post %></p>
    </div>
</script>
</html>
